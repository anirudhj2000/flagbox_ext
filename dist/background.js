chrome.runtime.onMessage.addListener((function(e,o,n){return console.log("Taking screenshot message recieved",e),"take_screenshot"===e.type&&null!=e.x&&null!=e.y&&e.width&&e.height?(console.log("Taking Process",e),chrome.tabs.captureVisibleTab(null,{format:"png"},(function(o){console.log("Resp sent Nia",e,o),n({response:o})}))):"downloadImage"===e.type&&e.buffer&&(console.log("downloadImage",e),function(e){var o=new Blob([e],{type:"image/png"});try{var n=URL.createObjectURL(o),c=document.createElement("a");c.href=n,c.download="screenshot.png",document.body.appendChild(c),c.click(),console.log("link",c,"clicked"),document.body.removeChild(c),URL.revokeObjectURL(n)}catch(e){console.log("error",e)}}(e.buffer)),!0}));